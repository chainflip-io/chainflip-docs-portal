---

title: Broker Account

description: Chainflip Broker Account guide

---

## Broker Account Role

Chainflip uses the concept of Account Roles to manage permissions between various network actors. Every account on the Chainflip network can go through the lifecycle.

Upon [Funding](#funding) your account, your account will be created without any defined role. This account state is known as `Unregistered`. Unregistered accounts have access to basic functionality on the State Chain, such as redeeming funds and participating in tokenholder governance.

In order to integrate in the network, you will need to **register** the account for the `Liquidity Provider` role.

When an account has fulfilled its purpose and the owner wishes to redeem all remaining FLIP tokens, its Role needs to be **deregistered** to ensure the account has cleaned up its state, for example withdrawing any assets held on-chain.


## Funding your account

In order to use your Chainflip account, you need to fund it.

{/* *Coming soon*

TODO: I would explain the various funding ways here: Smart Contract, LP.chainflip.io */}


### Fund and redeem via Auctions application

The easiest way to fund your Chainflip account is via the [Auctions application](https://auctions.chainflip.io/). This is primarily built for funding validator nodes, but can be used for any Chainflip account.

1. Make sure you have `FLIP` (ERC-20) in your EVM crypto wallet.
2. Go to [Chainflip Auctions page](https://auctions.chainflip.io/) > "[**My Nodes**](https://auctions.chainflip.io/nodes)".
3. Connect your crypto wallet containing the `FLIP`.
4. Click the button "**+ Add Node**" > You should see the "**Register new node**" dialog.
5. Enter the Validator ID you got during [Generating Keys](/validators/mainnet/validator-setup#4-generating-validator-keys) step — your `Public Key(SS58)`— and the amount of `FLIP` you want to fund. Click on "**Add Funds**".
6. Your crypto wallet will ask you to sign two transactions. The first one is a token approval and the second one transfers and add funds to your account.
7. Congratulations! Your Chainflip account is now funded.

### Fund and redeem via State Chain Gateway

As explained in the [State Chain Overview](/protocol/funding-state-chain-account#state-chain-flip-gateway), the `StateChainGateway` contract has two main entry points for those looking to interact with the protocol:
1. Funding a State Chain account with \$FLIP tokens
2. Redeeming \$FLIP tokens from a State Chain account

#### Funding

Users can fund a State Chain account by making a smart contract call and providing an amount of \$FLIP to be locked in the contract. Tokens need to be approved first by the user to be transferred by the contract.

| Param | Description | Data type |
|-------|-------------|-----------|
| `nodeID` | `ChainflipAccountID` (a hex representation of a substrate SS58 encoded public key) of the account to fund. | `bytes32` |
| `amount` | Amount of \$FLIP tokens to fund. The amount needs to be higher than the minimum funding amount, set to 1 $FLIP as of now. | `uint256` |

```solidity
    function fundStateChainAccount(bytes32 nodeID, uint256 amount) external;
```


#### Redeeming

After the user has submitted a redemption request to the State Chain, the protocol will submit the redemption to the State Chain Gateway. The contract will store it as a Redemption struct. The redemption is considered to be pending and can be checked with the view function below.

| Param | Description | Data type |
|-------|-------------|-----------|
| `amount` | Amount of \$FLIP tokens redeemed | `uint256` |
| `redeemAddress` | Ethereum address that will receive the redeemed $FLIP | `address` |
| `startTime` | Starting timestamp in which the Redemption can be executed | `uint48` |
| `expiryTime` | Timestamp in which the redemption expires and can't be executed anymore | `uint48` |
| `executor` | Address that can execute the redemption. By default any address can execute any redemption. | `address` |

```solidity
    struct Redemption {
        uint256 amount;
        address redeemAddress;
        uint48 startTime;
        uint48 expiryTime;
        address executor;
    }

    function getPendingRedemption(bytes32 nodeID) external view returns (Redemption memory);
```

As previously explained, the fail-safe mechanism adds a 2-day delay between the registry of the redemption and the time when it can be executed. After that delay and until the expiry time, the redemption can be executed to complete the redemption process. In the event of the redemption having specified an executor address, only that address can execute the redemption. Otherwise, any address can execute it.

The protocol doesn't automatically execute the redemptions, the user needs to make smart contract call below specifying the nodeID of the account following the same format as the funding function.

```solidity
    function executeRedemption(bytes32 nodeID) external returns (address, uint256);
```