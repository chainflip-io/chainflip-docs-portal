---

title: Running LP Light RPC node

description: Running LP Light RPC node guide.

---

import { Tabs } from 'nextra/components'

## LP Light RPC node

As of version `1.12.0`, to call the LP RPC endpoints, you must run your own LP Light RPC node. Operating a Chainflip light-RPC node is straightforward and resource-efficient.
The LP light-rpc node is just a normal Chainflip node running in a specialized `--sync light-rpc` mode. Your LP account key must be injected in the node's keystore to be able to expose the LP RPC endpoints and submit extrinsics.

This `light-rpc` mode prunes older blocks and permits querying only recent blocks, significantly reducing disk space requirements compared to running a full node. The recommended minimum requirements for running a light-rpc node include:
* 2 vCPU
* 4 GB RAM
* 20 GB SSD

## Running the LP light-rpc node using Docker

### Setup

* Clone the `chainflip-mainnet-apis` repo
```bash
git clone https://github.com/chainflip-io/chainflip-mainnet-apis.git
cd chainflip-mainnet-apis
```

### LP account key

> ‚õîÔ∏è Please make sure you backup your keys. If you lose your keys, you will lose access to your funds. ‚õîÔ∏è

* If you have an existing LP account key, copy it to the `./chainflip/keys/lp/signing_key_file` file. Please make sure that the key is in the correct location, otherwise it won't be properly injected into the node's keystore.

If you don't have an LP account key, you can generate one using the following steps.

```bash
mkdir -p ./chainflip/keys/lp
docker run --platform=linux/amd64 --entrypoint=/usr/local/bin/chainflip-cli chainfliplabs/chainflip-cli:berghain-1.12.0 generate-keys --json > chainflip/lp-keys.json
cat chainflip/lp-keys.json | jq -r '.signing_key.secret_key' > chainflip/keys/lp/signing_key_file
```

### Running the node
* Start an LP RPC node and wait for it to sync:
```bash
docker compose --profile lp up -d
```

* View the logs to monitor sync progress
```bash
docker compose --profile lp logs -f
```

You should see something like this:

```log
node-with-lp-1  | 2025-10-30 10:42:26 Chainflip Node
node-with-lp-1  | 2025-10-30 10:42:26 ‚úåÔ∏è  version 1.12.0-11b2cc9c943
node-with-lp-1  | 2025-10-30 10:42:26 ‚ù§Ô∏è  by Chainflip Team <https://github.com/chainflip-io>, 2021-2025
node-with-lp-1  | 2025-10-30 10:42:26 üìã Chain specification: Chainflip-Berghain
node-with-lp-1  | 2025-10-30 10:42:26 üè∑  Node name: decorous-paper-9644
node-with-lp-1  | 2025-10-30 10:42:26 üë§ Role: FULL
node-with-lp-1  | 2025-10-30 10:42:26 üíæ Database: RocksDb at /etc/chainflip/chaindata/chains/Chainflip-Berghain/db/full_light
node-with-lp-1  | 2025-10-30 10:42:26 ‚ö°  Light-RPC mode enabled
node-with-lp-1  | 2025-10-30 10:42:26 Deleting old db files and recreating a new RocksDB database on startup.
node-with-lp-1  | 2025-10-30 10:42:28 üî® Initializing Genesis block/state (state: 0xceb9‚Ä¶3b8d, header-hash: 0x8b8c‚Ä¶6eb9)
node-with-lp-1  | 2025-10-30 10:42:29 üè∑  Local node identity is: 12D3KooWGP9hRqHK4mqKsGH55PyvDijQKtKDyvJSFMxmo3T7dj2T
node-with-lp-1  | 2025-10-30 10:42:29 Running libp2p network backend
node-with-lp-1  | 2025-10-30 10:42:29 üóùÔ∏è Lp key found in the keystore, enabling LP-related RPCs
node-with-lp-1  | 2025-10-30 10:42:29 üíª Operating system: linux
node-with-lp-1  | 2025-10-30 10:42:29 üíª CPU architecture: x86_64
node-with-lp-1  | 2025-10-30 10:42:29 üíª Target environment: gnu
node-with-lp-1  | 2025-10-30 10:42:29 üíª Memory: 23996MB
node-with-lp-1  | 2025-10-30 10:42:29 üíª Kernel: 6.10.14-linuxkit
node-with-lp-1  | 2025-10-30 10:42:29 üíª Linux distribution: Ubuntu 22.04.5 LTS
node-with-lp-1  | 2025-10-30 10:42:29 üíª Virtual machine: no
node-with-lp-1  | 2025-10-30 10:42:29 üì¶ Highest known block at #0
node-with-lp-1  | 2025-10-30 10:42:29 „ÄΩÔ∏è Prometheus exporter started at 127.0.0.1:9615
node-with-lp-1  | 2025-10-30 10:42:29 Running JSON-RPC server: addr=0.0.0.0:9944, allowed origins=["*"]
```

Make sure:
* To see that light-rpc mode is enabled in the logs. Log line similar to: `‚ö°  Light-RPC mode enabled`
* LP key is properly injected and LP RPC endpoints are enabled. Log line similar to: `üóùÔ∏è Lp key found in the keystore, enabling LP-related RPCs`


* Wait until the node is synced before start making RPC calls. This should take around 2 minutes.

> üí° Note: Your node is considered synced when you see logs similar to:
```log
node-with-lp-1  | 2025-10-30 10:53:49 üèÜ Imported #10260208 (0xe26d‚Ä¶ad53 ‚Üí 0xc279‚Ä¶f190)
node-with-lp-1  | 2025-10-30 10:53:54 üí§ Idle (8 peers), best: #10260208 (0xc279‚Ä¶f190), finalized #10260206 (0x0507‚Ä¶e82d), ‚¨á 229.9kiB/s ‚¨Ü 184.4kiB/s
node-with-lp-1  | 2025-10-30 10:53:55 üèÜ Imported #10260209 (0xc279‚Ä¶f190 ‚Üí 0x7cb8‚Ä¶21f4)
```

* You can check the node's health and verify it is synced by using this RPC call:
```
curl -H "Content-Type: application/json" \
    -d '{"id":1, "jsonrpc":"2.0", "method": "system_health"}' \
    http://localhost:9944
```
You should a response showing that `isSyncing` is false, similar to:
```
{"jsonrpc":"2.0","result":{"peers":8,"isSyncing":false,"shouldHavePeers":true},"id":1}
```

* To stop the node:
```bash
docker compose --profile lp down
```

### Interacting with the APIs

Now you can interact with the APIs using any HTTP or WS client. Here we use the `curl` and `wscat` commands.

* For example, to request a liquidity deposit address for `ETH` :

<Tabs items={['curl', 'wscat']}>
    <Tabs.Tab>
        ```bash
        curl -H "Content-Type: application/json" \
        -d '{"id":1, "jsonrpc":"2.0", "method": "lp_request_liquidity_deposit_address_v2", "params": ["ETH"]}' \
        http://localhost:9944
        ```
    </Tabs.Tab>
    <Tabs.Tab>
        ```bash
        wscat -c ws://localhost:9944 -x '{"id":1, "jsonrpc":"2.0", "method": "lp_request_liquidity_deposit_address_v2", "params": ["ETH"]}'
        ```
    </Tabs.Tab>
</Tabs>

* Subscribe to order fills. Note that subscriptions are only supported over WebSockets.
```bash
wscat -c ws://localhost:9944 -x '{ "id": 1, "jsonrpc": "2.0", "method": "lp_subscribe_order_fills"}'
```


## Migrating from LP-API Binary

If you're upgrading from a previous version that used separate LP API binary service, the new LP light-rpc mode provides a simplified architecture where all APIs are exposed directly onto the rpc node.
There are no additional steps that are required from your side because all the same endpoints are exposed on the rpc node. All you have to do is:

* Make sure that your LP key is in the right location so that it can be properly injected into the node's keystore. Follow the steps in [LP account key](#lp-account-key)
* Redirect all your bots or external services from the old binary port to the new light-rpc node port.

To give you a better idea of the new architecture, here is a visual comparison of the old and new architecture:

* Before version `1.12.0`, you needed to run 2 services: the LP API binary and an RPC node. The signing key is injected into the LP API binary's keystore.

<img src="/light-rpc/old-lp-api-rpc.png" alt="LP API binary and RPC node" />


* As of version `1.12.0`, the LP and general RPCs are consolidated as part of the node itself. the signing key is injected into the node's keystore on startup.

<img src="/light-rpc/new-lp-light-rpc.png" alt="LP Light-RPC node" />



